---
import SectionTitle from "./SectionTitle.astro";
import { Icon } from "astro-iconify";
import { getLangFromUrl, useTranslations } from "../i18n/utils";
import TimelineItem from "./TimelineItem.astro";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

import educationData from "../data/education.json";

const certifications = educationData.certifications.map((cert: any) => ({
    ...cert,
    description: t(cert.descriptionKey as any),
}));
---

<section id="certifications" class="mt-16 w-full">
    <h2
        class="text-xl sm:text-2xl md:text-3xl font-bold text-white text-left mb-8 sm:mb-12 pl-4 border-l-4 border-orange-500"
    >
        {t("certifications.title")}
    </h2>

    <div class="w-full pl-2 sm:pl-4">
        {
            certifications.map(
                (
                    { title, issuer, date, description, pdfPath, icon },
                    index,
                ) => (
                    <TimelineItem
                        title={title}
                        subtitle={issuer}
                        date={date}
                        description={description}
                        icon={icon}
                        link={pdfPath}
                        linkText={t("certifications.viewOnline")}
                        isLast={index === certifications.length - 1}
                    />
                ),
            )
        }
    </div>
</section>
