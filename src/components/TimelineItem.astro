---
import { Icon } from "astro-iconify";

interface Props {
  date: string;
  title: string;
  subtitle: string;
  description?: string;
  icon?: string;
  link?: string;
  linkText?: string;
  isLast?: boolean;
}

const {
  date,
  title,
  subtitle,
  description,
  icon = "mdi:school",
  link,
  linkText,
  isLast = false,
} = Astro.props;
---

<div class="relative flex gap-8 pb-16 group" data-aos="fade-up" data-aos-duration="1000">
  <!-- Línea conectora -->
  {
    !isLast && (
      <div class="absolute left-[27px] top-12 bottom-0 w-px bg-gradient-to-b from-orange-500/40 via-orange-500/20 to-transparent group-hover:from-orange-500 transition-all duration-700" />
    )
  }

  <!-- Icono / Punto -->
  <div class="relative flex-shrink-0">
    <div
      class="w-14 h-14 rounded-2xl bg-bg/80 backdrop-blur-xl border border-white/5 shadow-2xl flex items-center justify-center group-hover:scale-110 group-hover:border-orange-500/50 group-hover:shadow-[0_0_30px_rgba(249,115,22,0.2)] transition-all duration-500 z-10"
    >
      <Icon
        name={icon}
        class="w-7 h-7 text-orange-500/80 group-hover:text-orange-500 transition-colors duration-500"
      />
    </div>
  </div>

  <!-- Contenido -->
  <div class="flex-grow pt-2">
    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4">
      <h3
        class="text-2xl font-black tracking-tighter text-zinc-900 dark:text-zinc-100 group-hover:text-orange-500 transition-colors duration-500"
      >
        {title}
      </h3>
      <span
        class="text-[10px] uppercase font-black tracking-[0.2em] text-orange-600 dark:text-orange-500/80 bg-orange-500/10 dark:bg-orange-500/5 px-4 py-1.5 rounded-lg border border-orange-500/10 w-fit backdrop-blur-sm"
      >
        {date}
      </span>
    </div>

    <p
      class="text-lg text-zinc-700 dark:text-[var(--color-muted)] font-bold tracking-tight mb-4 border-l-2 border-orange-500/20 pl-4"
    >
      {subtitle}
    </p>

    {
      description && (
        <p class="text-zinc-600 dark:text-[var(--color-muted)] leading-relaxed text-sm sm:text-base max-w-3xl font-light">
          {description}
        </p>
      )
    }

    {
      link && (
        <a
          href={link}
          target="_blank"
          rel="noopener noreferrer"
          class="group/link relative inline-flex items-center gap-3 mt-8 px-6 py-2.5 rounded-xl text-sm font-black bg-orange-500/5 border border-orange-500/20 hover:bg-orange-500 hover:text-white transition-all duration-500 overflow-hidden"
        >
          <div class="absolute inset-0 bg-gradient-to-r from-white/0 via-white/10 to-white/0 -translate-x-full group-hover/link:translate-x-full transition-transform duration-1000" />
          <Icon
            name="mdi:link-variant"
            class="w-4 h-4 group-hover/link:rotate-45 transition-transform relative z-10"
          />
          <span class="relative z-10">{linkText || "Ver más"}</span>
        </a>
      )
    }
  </div>
</div>
